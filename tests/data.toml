# invalid atoms
# format: [invalid atom, EAPI range]
invalid_atoms = [
    ["", "0-"],
    ["a", "0-"],
    ["/b", "0-"],
    ["a/+b", "0-"],
    [".a/.b", "0-"],
    # package names can't end in a hyphen followed by anything matching a version
    ["a/b-0", "0-"],
    ["<a/b-1-1", "0-"],
    # version operator with missing version
    ["~a/b", "0-"],
    ["~a/b-r1", "0-"],
    [">a/b", "0-"],
    [">=a/b-r1", "0-"],
    # '~' operator can't be used with a revision
    ["~a/b-1-r1", "0-"],
    # '*' suffix can only be used with the '=' operator
    [">=a/b-0*", "0-"],
    ["~a/b-0*", "0-"],
    ["a/b-0*", "0-"],
    # '*' suffix can only be used with valid version strings
    ["=a/b-0.*", "0-"],
    ["=a/b-0-r*", "0-"],
    # EAPI specific support
    # slot deps in EAPI >= 1
    ['cat/pkg:0', '0'],
    # blockers in EAPI >= 2
    ['!cat/pkg', '0-1'],
    ['!!cat/pkg', '0-1'],
    # use deps in EAPI >= 2
    ['cat/pkg[use]', '0-1'],
    ['cat/pkg[a,b=,!c=,d?,!e?,-f]', '0-1'],
    # use dep defaults in EAPI >= 4
    ['cat/pkg[use(+)]', '0-3'],
    ['cat/pkg[use(-)]', '0-3'],
    ['cat/pkg[a(-),b(+)=,!c(-)=,d(+)?,!e(-)?,-f(+)]', '0-3'],
    # subslot deps in EAPI >= 5
    ['cat/pkg:0/1', '0-4'],
    # slot operators in EAPI >= 5
    ['cat/pkg:*', '0-4'],
    ['cat/pkg:=', '0-4'],
    ['cat/pkg:0=', '0-4'],
    # repo deps in no official EAPI
    ['cat/pkg::repo', '0~'],
]

# version comparison
# format: expression that evaluates to true
ver_cmp = [
    # simple major versions
    "0 == 0",
    "0 != 1",
    # equal due to integer coercion and "-r0" being the revision default
    "0 == 0-r0",
    "1 == 01",
    "01 == 001",
    "1.00 == 1.0",
    "1.0100 == 1.010",
    "01.01 == 1.01",
    "0001.1 == 1.1",
    "1.2 == 001.2",
    "1.0.2 == 1.0.2-r0",
    "1.0.2-r0 == 1.000.2",
    "1.000.2 == 1.00.2-r0",
    "0-r0 == 0-r00",
    "0_beta01 == 0_beta001",
    "1.2_pre08-r09 == 1.2_pre8-r9",
    "1.010.02 != 1.01.2",
    # minor versions
    "0.1 < 0.11",
    "0.01 > 0.001",
    "1.0 > 1",
    "1.0_alpha > 1_alpha",
    "1.0_alpha > 1",
    "1.0_alpha < 1.0",
    # version letter suffix
    "0a < 0b",
    "1.1z > 1.1a",
    "1.010.1r_p < 1.0100.1s_beta",
    # release types
    "1_alpha < 1_beta",
    "1_beta < 1_pre",
    "1_pre < 1_rc",
    "1_rc < 1",
    "1 < 1_p",
    # release suffix vs non-suffix
    "1.2.3_alpha < 1.2.3",
    "1.2.3_beta < 1.2.3",
    "1.2.3_pre < 1.2.3",
    "1.2.3_rc < 1.2.3",
    "1.2.3_p > 1.2.3",
    # release suffix version
    "0_alpha1 < 0_alpha2",
    "0_alpha2-r1 > 0_alpha1-r2",
    "0_p1 < 0_p2",
    # last release suffix
    "0_alpha_rc_p > 0_alpha_rc",
    # revision
    "0-r1 > 0",
    "0-r2 > 0-r1",
    "1.0.2_pre01-r2 > 1.00.2_pre001-r1",
]

# version sorting
# format: [unsorted, sorted]
ver_sort = [
    # equal versions aren't sorted
    [["0", "00", "0-r0", "0-r00"], ["0", "00", "0-r0", "0-r00"]],
    [["1.0.2", "1.0.2-r0", "1.000.2"], ["1.0.2", "1.0.2-r0", "1.000.2"]],
    # simple versions
    [["3", "2", "1", "0"], ["0", "1", "2", "3"]],
    [["1.100", "1.10", "1.1"], ["1.1", "1.10", "1.100"]],
    # letter suffixes
    [["1z", "1y", "1b", "1a"], ["1a", "1b", "1y", "1z"]],
    # release suffixes
    [["1_p", "1_rc", "1_pre", "1_beta", "1_alpha"], ["1_alpha", "1_beta", "1_pre", "1_rc", "1_p"]],
    [["1_p2", "1_p1", "1_p0"], ["1_p0", "1_p1", "1_p2"]],
    # revisions suffixes
    [["1-r2", "1-r1", "1-r0"], ["1-r0", "1-r1", "1-r2"]],
]

# atom sorting
# format: [unsorted, sorted]
atom_sort = [
    # categories
    [["c/pkg", "b/pkg", "a/pkg"], ["a/pkg", "b/pkg", "c/pkg"]],
    # packages
    [["cat/c", "cat/b", "cat/a"], ["cat/a", "cat/b", "cat/c"]],
    # blocks
    [["!a/b", "!!a/b", "a/b"], ["a/b", "!!a/b", "!a/b"]],
    # version ops
    [
        [">a/b-1", ">=a/b-1", "~a/b-1", "=a/b-1*", "=a/b-1", "<=a/b-1", "<a/b-1"],
        ["<a/b-1", "<=a/b-1", "=a/b-1", "=a/b-1*", "~a/b-1", ">=a/b-1", ">a/b-1"]
    ],
    # slots
    [["a/b:2", "a/b:1", "a/b:0"], ["a/b:0", "a/b:1", "a/b:2"]],
    # subslots
    [["a/b:0/2", "a/b:0/1", "a/b:0/0"], ["a/b:0/0", "a/b:0/1", "a/b:0/2"]],
    # use deps
    [["a/b[c]", "a/b[b]", "a/b[a]"], ["a/b[a]", "a/b[b]", "a/b[c]"]],
    # equal versions shouldn't be sorted
    [["=a/b-0", "=a/b-00", "=a/b-0-r0"], ["=a/b-0", "=a/b-00", "=a/b-0-r0"]],
    [["=a/b-1.0.2", "=a/b-1.0.2-r0", "=a/b-1.000.2"], ["=a/b-1.0.2", "=a/b-1.0.2-r0", "=a/b-1.000.2"]],
    # simple versions
    [["=a/b-2", "=a/b-1", "=a/b-0"], ["=a/b-0", "=a/b-1", "=a/b-2"]],
    [["=a/b-1.100", "=a/b-1.10", "=a/b-1.1"], ["=a/b-1.1", "=a/b-1.10", "=a/b-1.100"]],
    # letter suffixes
    [["=a/b-1z", "=a/b-1y", "=a/b-1b", "=a/b-1a"], ["=a/b-1a", "=a/b-1b", "=a/b-1y", "=a/b-1z"]],
    # release suffixes
    [
        ["=a/b-1_p", "=a/b-1_rc", "=a/b-1_pre", "=a/b-1_beta", "=a/b-1_alpha"],
        ["=a/b-1_alpha", "=a/b-1_beta", "=a/b-1_pre", "=a/b-1_rc", "=a/b-1_p"]
    ],
    [["=a/b-1_p2", "=a/b-1_p1", "=a/b-1_p0"], ["=a/b-1_p0", "=a/b-1_p1", "=a/b-1_p2"]],
    # revisions
    [["=a/b-1-r2", "=a/b-1-r1", "=a/b-1-r0"], ["=a/b-1-r0", "=a/b-1-r1", "=a/b-1-r2"]],
]
